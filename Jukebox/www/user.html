<!DOCTYPE html>
<html>
  <head>
  <title></title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
	<meta charset="utf-8">

	<link rel="stylesheet" href="css/jquery/jquery.mobile-1.0rc1.css" />
	
	<!-- iPad/iPhone specific css below, add after your main css >
	<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />		
	<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />		
	-->
	<!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
	<!-- Javascript Framework Files -->
    <script type="text/javascript" charset="utf-8" src="javascript/phonegap-1.1.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="javascript/jquery/jquery-1.6.4.js"></script>
    <script type="text/javascript" charset="utf-8" src="javascript/jquery/jquery.mobile-1.0rc1.js"></script>
	<script type="text/javascript" charset="utf-8" src="javascript/date.js"></script>

    <!-- Plugins -->
    <script type="text/javascript" charset="utf-8" src="javascript/plugins/musicplugin.js"></script>
        
    <!-- Javascript Source Files -->
    <script type="text/javascript" charset="utf-8" src="javascript/logics/pgapi.js"></script>
	<script type="text/javascript" charset="utf-8" src="javascript/logics/jukeboxapp.js"></script>
    
    <script type="text/javascript">


	// If you want to prevent dragging, uncomment this section asdfasdf
	/*
	function preventBehavior(e) 
	{ 
      e.preventDefault(); 
    };
	document.addEventListener("touchmove", preventBehavior, false);
	*/
	
	/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
	see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
	for more details -jm */
	/*
	function handleOpenURL(url)
	{
		// TODO: do something with the url passed in.
	}
	*/
	
	function onBodyLoad()
	{		
		document.addEventListener("deviceready", onDeviceReady, false);
	}
	
	/* When this function is called, PhoneGap has been initialized and is ready to roll */
	/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
	see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
	for more details -jm */
	function onDeviceReady()
	{
		var jukeboxServices = new Jukebox.Services();
		jukeboxServices.getEvents(displayEvents);
	}

	function displayEvents(events) {
		var jukeboxDOM = new Jukebox.DOM();
		$('#eventsList').html(jukeboxDOM.renderEventListItems(events));
	}
	
	function getSongs(eventId) {
		var jukeboxServices = new Jukebox.Services();
		jukeboxServices.getEventSongs(eventId, displaySongs);
	}
	
	function displaySongs(songs, eventId) {
		var jukeboxDOM = new Jukebox.DOM();
		$('#songsList').html(jukeboxDOM.renderSongListItems(songs, eventId));
        
		var jukeboxServices = new Jukebox.Services();
        jukeboxServices.getQueue(eventId, function(songIds) {
                                 $('#queueSongsList').html(jukeboxDOM.renderQueueSongListItems(songIds, songs, eventId));
                                 });
	}
	
	function clickSong(songId, eventId) {
		var jukeboxServices = new Jukebox.Services();
		jukeboxServices.requestSong(songId, eventId, songRequestSuccess);
	}
	
	function songRequestSuccess(data) {
		alert("You've successfully requested this song!");
	}
    
    </script>
  </head>
  <body onload="onBodyLoad()">
      <!--
	<h1>Hey, it's PhoneGap!</h1>
	<p>Don't know how to get started? Check out <em><a target="_blank" href="http://www.phonegap.com/start#ios-x4">PhoneGap Start</a></em>
	<br />
	<ol>
		<li>Check your console log for any white-list rejection errors.</li>
		<li>Add your allowed hosts in PhoneGap.plist/ExternalHosts (wildcards OK)</li>
	</ol>
       !-->
	   
	   <div data-role="page" id="events">
			<div data-role="header" data-position="inline" data-theme="b">
				<a data-rel="back" data-icon="arrow-l" data-theme="b">Home</a>
				<h1>Events</h1>
			</div>
		   <div data-role="content">
				<div class="content-primary">	
					<ul data-role="listview" id="eventsList">
						<!--<li>
							<a href="#controls">
								<h3>Rockit Bar and Grill</h3>
								<p>
									22 W. Hubbard, Chicago, IL
								</p>
							</a>
						</li>-->
					</ul>
				</div>
			</div>
		</div>

	   
	   <div data-role="page" id="controls">
		   <div data-role="header" data-position="inline" data-theme="b">
				<a href="#events" data-direction="reverse" data-icon="arrow-l" data-theme="b">Events</a>
				<h1 class="eventTitle">Event</h1>
			</div>
		   <div data-role="content">
				<div class="content-primary">	
					<ul data-role="listview" id="songsList">
					</ul>
				</div>
			</div>
			<div data-role="footer" data-id="foo1" data-position="fixed" data-theme="b">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#controls" class="ui-btn-active ui-state-persist" data-transition="slideup">Songs</a></li>
                        <li><a href="#controls-queue" data-transition="slideup">Queue</a></li>
                        <li><a href="footer-persist-c.html" data-transition="slideup">Now Playing</a></li>
                    </ul>
                </div><!-- /navbar -->
            </div>
       </div>
      
      <div data-role="page" id="controls-queue">
          <div data-role="header" data-position="inline" data-theme="b">
              <a href="#events" data-direction="reverse" data-icon="arrow-l" data-theme="b">Events</a>
              <h1 class="eventTitle">Event</h1>
          </div>
          <div data-role="content">
              <div class="content-primary">	
                  <ul data-role="listview" id="queueSongsList">
                  </ul>
              </div>
          </div>
          <div data-role="footer" data-id="foo1" data-position="fixed" data-theme="b">
              <div data-role="navbar">
                  <ul>
                      <li><a href="#controls" data-transition="slideup">Songs</a></li>
                      <li><a class="ui-btn-active ui-state-persist" href="#controls-queue" data-transition="slideup">Queue</a></li>
                      <li><a href="footer-persist-c.html" data-transition="slideup">Now Playing</a></li>
                  </ul>
              </div><!-- /navbar -->
          </div>
      </div>
      
  </body>
</html>
